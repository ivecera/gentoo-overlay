diff -uNrp xen-3.4.2.orig/tools/python/xen/util/xmlrpcclient.py xen-3.4.2/tools/python/xen/util/xmlrpcclient.py
--- xen-3.4.2.orig/tools/python/xen/util/xmlrpcclient.py	2009-11-10 16:12:56.000000000 +0100
+++ xen-3.4.2/tools/python/xen/util/xmlrpcclient.py	2011-05-10 10:57:30.063041240 +0200
@@ -22,6 +22,7 @@ import socket
 import string
 import xmlrpclib
 from types import StringTypes
+from sys import hexversion
 
 
 try:
@@ -54,7 +55,12 @@ class UnixTransport(xmlrpclib.Transport)
         return xmlrpclib.Transport.request(self, host, '/RPC2',
                                            request_body, verbose)
     def make_connection(self, host):
-        return HTTPUnix(self.__handler)
+        if hexversion < 0x02070000:
+            # python 2.6 or earlier
+            return HTTPUnix(self.__handler)
+        else:
+            # xmlrpclib.Transport changed in python 2.7
+            return HTTPUnixConnection(self.__handler)
 
 
 # We need our own transport for HTTPS, because xmlrpclib.SafeTransport is
diff -uNrp xen-3.4.2.orig/tools/python/xen/util/xmlrpclib2.py xen-3.4.2/tools/python/xen/util/xmlrpclib2.py
--- xen-3.4.2.orig/tools/python/xen/util/xmlrpclib2.py	2009-11-10 16:12:56.000000000 +0100
+++ xen-3.4.2/tools/python/xen/util/xmlrpclib2.py	2011-05-10 10:58:35.051045721 +0200
@@ -58,6 +58,9 @@ def stringify(value):
 # some bugs in Keep-Alive handling and also enabled it by default
 class XMLRPCRequestHandler(SimpleXMLRPCRequestHandler):
     protocol_version = "HTTP/1.1"
+    # xend crashes in python 2.7 unless disable_nagle_algorithm = False
+    # it isn't used in earlier versions so it is harmless to set it generally
+    disable_nagle_algorithm = False
 
     def __init__(self, hosts_allowed, request, client_address, server):
         self.hosts_allowed = hosts_allowed
